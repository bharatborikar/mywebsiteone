<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
		<meta name="viewport" content="width=device-width, initial-scale=1"> 
		<title>My Personal Assistant | AI</title>
		<link rel="shortcut icon" href="../favicon.ico">
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<script src="js/jquery.js" type="text/javascript"></script>
	</head>
	<body>
		<div class="container">
				<ol id="commandList"></ol>
				<div id="speechbar"></div>
		</div>
		<script type="text/javascript">
		function make_speak(text) 
{
	return new Promise(function(resolve,reject){
	if (!SpeechSynthesisUtterance) { _e('SpeechSynthesisUtterance is not working!'); return false; }
	
	var selectedOption = 'Google UK English Female';
	var selectedVoice = speechSynthesis
                  .getVoices()
                  .filter(function(voice) {
                     return voice.voiceURI === selectedOption;
                  })
                  .pop();
 
               // Create the utterance object setting the chosen parameters
               utterance = new SpeechSynthesisUtterance();
               utterance.text = text;
               utterance.voice = selectedVoice;  
               utterance.lang = 'en-GB';
               utterance.rate = 1;
               utterance.pitch = 1; 
			
               utterance.addEventListener('start', function() {
                  // console.log('Speaker started: ' + text); 
				  $("#commandList").append("<li class='yourspeech'><input type='text' id='' name='' value='" + text + "'/></li>");
				  resolve('Speaker started: ' + text);
				  
               });
               utterance.addEventListener('end', function() {
                  // console.log('Speaker finished!'); 
				  recognizer.start();
               });
				utterance.addEventListener('error', function (event) {
					// console.log('Error occured while speacking!');
					reject('Error occured while speacking!' + text);
				});
               speechSynthesis.speak(utterance);
			   });
}
	make_speak("Start Command");
		</script> 
	</body>
</html>